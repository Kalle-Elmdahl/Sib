<form action="/search" method="get">
    <label class="input">
        <input value="<%=searchValue%>" aria-label="Sök efter artiklar" autocomplete="off" type="search" placeholder="&nbsp" name="query">
        <span>Sökord</span>
        <button type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#fff" width="18px" height="18px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        </button>
    </label>
</form>


<h2>Sökresultat</h2>

<% if(searchedCategories.length > 0) { %>
    <h3>Kategorier</h3>
    <% searchedCategories.forEach(category => { %>
        <div class="category">
            <span><%=category.name%></span>
            <a href="/<%=category.link%>">Gå till kategori</a>
        </div>
    <% }); %>
<% } %>

<% if(searchedArticles.length > 0) { %>
    <h3>Artiklar</h3>
    <% searchedArticles.forEach(article => { %>
        <div class="box">
            <h3><%= article.name %></h3>
            <% 
                article.description = article.description.replace(/\n|\r/g, "")
                article.description = article.description.replace(new RegExp('(' + queries.join('|') + ')','ig'), '<b>$1</b>');
            %>
            <p><%-article.description%></p>
            <a href="/<%=article.categoryLink%>/<%=article.link%>" >Läs artikeln</a>
        </div>

    <% }); %>
<% } else { %>
    <p>Hittade inga matchande artiklar</p>
<% } %>
<% if(!deep && searchedArticles.length === 0) { %> 
    <button onclick="window.location.href = window.location.href + '&deep=true'">Sök smartare</button>
<% } else if(!deep) { %>
    <button onclick="window.location.href = window.location.href + '&deep=true'">Visa mer</button>
<% } %>

<% if(searchedImages.length > 0) { %>
    <h3>Bilder</h3>
    <% searchedImages.forEach(image => { %>
        <img src="<%=image.compressed%>">
    <% }); %>
<% } %>